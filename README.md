# git 勉強会

## 目的
* **バージョン管理ツールとしての** git を使えるようになる
  * gitとは? バージョン管理の必要性
  * gitコマンド
    * 主要なgitコマンド
  * *GitHub* とグループプログラミング
    * リモート
    * Branch
    * 主要なコマンド


## gitとは？ バージョン管理ツールの必要性
~~"git"、"Git"、"GIT"といろいろな表記揺れがありますがどれでもいいと思います~~

### エンジニアにとってのソースコード
* 大学の課題: 10行〜20行(C言語の場合) -> Pythonなら数行程度
* 大学の研究: 100行〜200行(Pythonの場合) -> ~~C言語で研究することは、ほぼほぼない~~
* エンジニア: 多い人で ***1日*** に2000行程度[^1]
* 趣味の人: * * *

### エンジニアにとってのファイル数
* 大学の課題: 1つの課題で1~2程度、授業全体で10~20？
* 大学の研究: 研究1つで10~20
* エンジニア: プロジェクトは階層構造で成り立ち, 1つのフォルダにつき10程度、これが何階層にも...
* 趣味の人: * * *

### "Fix Bug" と言う悪夢
* いわゆるバグとり
* 1つのバグを持ったファイルがあると、 **起動しない**、 **落ちる**、 **挙動が異なる** など

#### もしバグが見つかったら？

```:
if(find(bugs)) {
  what_should_we_do();
}
```

1. バグを探す
2. 数行程度書き換える
3. 動かしてみる
  * 動いた！-> 次の実装へ
  * あれ？ -> 1.へ

**ソースコードはよく書き換わる**

### 想像してみよう
1. 無
2. ...
3. ...
4. 3日間、なんとか苦心して平均30行程度のファイルが10こ(実行可能)
5. 新しい機能を思いついた！ -> ソースコードに2このファイルを追加、5この既存のファイルを改変
6. 動かない...
7. 2このファイルを除去、加筆したところを削除する、削除したところを書き直す
8. 動かない...
9. いろいろ変えてみる
10. 動かない...
11. ここを変えてみよう!
12. 動かない...
13. あれ？　元のファイル、どんなんだったっけ？

to be continued...

* 1へ戻るか
* 4へ戻るか

工夫次第で4へ戻ることもできます。 ~~ファイルでバージョンを管理する~~

**せっかくなので便利ツール"git"を使いましょう!**


## gitコマンドについて
### 主要なgitコマンド
1. 作業ディレクトリ[^2]でgitを使えるようにする
2. ファイルを追加、改変する
3. 変更を保存するファイルを選択する
4. 選択したファイルの変更を保存する


```:
git init
```
1に該当

* .gitと言うバージョン管理用のフォルダが作られる
* 作業ディレクトリ以下に含まれる全てのフォルダ、ファイルが監視対象となる

**ホームディレクトリでは絶対使わないように**

```:
git add ＜ファイル名＞, ＜ファイル名＞...
```
3に該当

変更を全て保存するような場合は`.`を使う

```:
git commit -m 'メッセージ'
```
4に該当

何をどのように変更したのかをメッセージとして残し、変更を保存する

```:
git init
git add README.md
git commit -m 'README.mdを追加'
```

```
↓ HEAD
■
```

```:
git add a.c
git commit -m 'a.cを追加しました'
```

```
  ↓ HEAD
■ ■
```

正確には、Working Treeがどうのとか細かい話がありますが、今は気にしないでいいです。

```:
git reset --soft  HEAD
git reset --mixed HEAD
git reset --hard  HEAD
```

### もう一度、想像してみよう
1. 無 `git init`
2. ...
3. ...
4. 3日間、なんとか苦心して平均30行程度のファイルが10こ(実行可能) `git add .` `git commit -m '＊＊＊ができた'` 
5. 新しい機能を思いついた！ -> ソースコードに2このファイルを追加、5この既存のファイルを改変
6. 動かない...
7. 2このファイルを除去、加筆したところを削除する、削除したところを書き直す

## *GitHub* とグループプログラミング
### リモート
```
1つのプロジェクトに3人が関わる
機能はA, B, C, D, E
D, EはA, B, Cができていないと完成しない機能（A, B, Cがある前提で作ることはできる）
リモートワークをしている
```

1. A~E全てを1人がこなす
2. A, B, Cを1人がこなし, D, Eを残りで分配
3. A, B, Cを分配する。のちに, D, Eを早く終わった人から順に...

それぞれが自分のローカルの端末で作業するのは非効率
-> プロジェクトを共有できるようにしよう！

***GitHub*** を使いましょう

```
          [GitHub]
      ↗︎      ↑      ↖︎
[a]         [b]         [c]
```

同じストリームで違う人が操作すると混線する

### Branch
次のコードを入力してみよう
```
git branch
```

master: 主にリリースしたもののみを提示する

develop: 実際に開発を行うブランチ

### 主要なコマンド
`git branch`    : 現在ローカルに存在するブランチを表示

`git checkout`  : 現在の既存のブランチのいずれかに変更する(`-b`オプションで新規にブランチを作成し、変更する)

`git push`      : 現在のコミットをリモートにアップロードする

`git pull`      : 現在までのリモートのコミットでローカルを更新する

[^1]:  [プログラマーは1日に何行コードを書ければいいのか？行数の目安を提案](https://mikumikuplay.com/it/code-gyousuu/)
[^2]: 現在作業をしているディレクトリ
[^3]: ユーザーがログインした時に入るディレクトリ

